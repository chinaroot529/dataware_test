<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习科学深度可视化分析</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3498db, #8e44ad);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2em;
            color: #5a67d8;
            font-weight: 500;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .card-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .card-title {
            font-size: 1.3em;
            color: #2d3748;
            font-weight: 600;
        }

        .card-subtitle {
            color: #718096;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .chart {
            width: 100%;
            height: 400px;
            position: relative;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .network-container {
            position: relative;
            height: 500px;
            overflow: hidden;
        }

        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .node:hover {
            stroke-width: 3px;
        }

        .link {
            stroke: #999;
            stroke-opacity: 0.6;
            transition: all 0.3s ease;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>🧠 学习科学深度分析仪表板</h1>
            <p>基于认知科学与教育心理学的数据洞察 | 检索练习・间隔复习・错因分析・增值评估・成绩分析・错题分析</p>
        </div>

        <div class="dashboard">
            <!-- 1. 检索练习效果分析 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🔍</div>
                    <div>
                        <div class="card-title">检索练习效果分析</div>
                        <div class="card-subtitle">元认知准确率 & 检索增益监控</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">73.5%</div>
                        <div class="metric-label">元认知准确率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">+12.8</div>
                        <div class="metric-label">平均检索增益</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">85.2%</div>
                        <div class="metric-label">检索覆盖率</div>
                    </div>
                </div>
                <div id="retrievalChart" class="chart"></div>
            </div>

            <!-- 2. 间隔复习效果追踪 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📅</div>
                    <div>
                        <div class="card-title">间隔复习效果追踪</div>
                        <div class="card-subtitle">遗忘曲线 & 复习时机优化</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">4.2</div>
                        <div class="metric-label">最佳间隔天数</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0.68</div>
                        <div class="metric-label">可欲困难指数</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">91.3%</div>
                        <div class="metric-label">间隔合规率</div>
                    </div>
                </div>
                <div id="spacingChart" class="chart"></div>
            </div>

            <!-- 3. 掌握学习进程监控 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🎯</div>
                    <div>
                        <div class="card-title">掌握学习进程监控</div>
                        <div class="card-subtitle">学习路径 & 达标分析</div>
                    </div>
                </div>
                <div id="masteryChart" class="chart"></div>
            </div>

            <!-- 4. 教师增值效果评估 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">👨‍🏫</div>
                    <div>
                        <div class="card-title">教师增值效果评估</div>
                        <div class="card-subtitle">Value-Added分析 & 教学效果对比</div>
                    </div>
                </div>
                <div id="valueAddedChart" class="chart"></div>
            </div>

            <!-- 5. 错因关联网络分析 -->
            <div class="card full-width">
                <div class="card-header">
                    <div class="card-icon">🕸️</div>
                    <div>
                        <div class="card-title">错因关联网络分析</div>
                        <div class="card-subtitle">知识点-错因关联图谱 & 智能诊断</div>
                    </div>
                </div>
                <div id="networkChart" class="network-container"></div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #3498db;"></div>
                        <span>知识点</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e74c3c;"></div>
                        <span>概念错误</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f39c12;"></div>
                        <span>计算错误</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #9b59b6;"></div>
                        <span>审题错误</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #2ecc71;"></div>
                        <span>粗心</span>
                    </div>
                </div>
            </div>

            <!-- 6. 解题步骤深度分析 -->
            <div class="card full-width">
                <div class="card-header">
                    <div class="card-icon">🔬</div>
                    <div>
                        <div class="card-title">解题步骤深度分析</div>
                        <div class="card-subtitle">解题路径追踪 & 效率优化</div>
                    </div>
                </div>
                <div id="stepsChart" class="chart"></div>
            </div>

            <!-- 成绩分析模块 -->
            <!-- 7. 年级维度成绩分析 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🏫</div>
                    <div>
                        <div class="card-title">年级维度成绩分析</div>
                        <div class="card-subtitle">年级整体表现 & 学科对比分析</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">78.5</div>
                        <div class="metric-label">年级平均分</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">92.3%</div>
                        <div class="metric-label">及格率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">35.8%</div>
                        <div class="metric-label">优秀率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">+2.3</div>
                        <div class="metric-label">月度增长</div>
                    </div>
                </div>
                <div id="gradeChart" class="chart"></div>
            </div>

            <!-- 8. 班级维度成绩分析 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">👥</div>
                    <div>
                        <div class="card-title">班级维度成绩分析</div>
                        <div class="card-subtitle">班级排名 & 内部分布分析</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">3/12</div>
                        <div class="metric-label">班级排名</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">81.2</div>
                        <div class="metric-label">班级平均分</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">12.5</div>
                        <div class="metric-label">标准差</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">+1.8</div>
                        <div class="metric-label">排名提升</div>
                    </div>
                </div>
                <div id="classChart" class="chart"></div>
            </div>

            <!-- 9. 个人维度成绩分析 -->
            <div class="card full-width">
                <div class="card-header">
                    <div class="card-icon">👤</div>
                    <div>
                        <div class="card-title">个人维度成绩分析</div>
                        <div class="card-subtitle">个人能力雷达 & 成长轨迹追踪</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">85.6</div>
                        <div class="metric-label">个人总分</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">15/45</div>
                        <div class="metric-label">班级排名</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">128/600</div>
                        <div class="metric-label">年级排名</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">+12</div>
                        <div class="metric-label">排名进步</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">数学</div>
                        <div class="metric-label">优势学科</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">英语</div>
                        <div class="metric-label">薄弱学科</div>
                    </div>
                </div>
                <div id="personalChart" class="chart"></div>
            </div>

            <!-- 错题分析模块 -->
            <!-- 10. 错题概览统计 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📊</div>
                    <div>
                        <div class="card-title">错题概览统计</div>
                        <div class="card-subtitle">错题总览 & 改正进度跟踪</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">156</div>
                        <div class="metric-label">错题总数</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">68.5%</div>
                        <div class="metric-label">改正率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">49</div>
                        <div class="metric-label">待改正</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">4.2天</div>
                        <div class="metric-label">平均改正时间</div>
                    </div>
                </div>
                <div id="errorOverviewChart" class="chart"></div>
            </div>

            <!-- 11. 错因归因分析 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🔍</div>
                    <div>
                        <div class="card-title">错因归因分析</div>
                        <div class="card-subtitle">AI智能归因 & 认知-操作错误分类</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">42.3%</div>
                        <div class="metric-label">认知错误</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">35.8%</div>
                        <div class="metric-label">操作错误</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">21.9%</div>
                        <div class="metric-label">混合错误</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">87.2%</div>
                        <div class="metric-label">AI归因准确率</div>
                    </div>
                </div>
                <div id="errorCauseChart" class="chart"></div>
            </div>

            <!-- 12. 错题知识点分析 -->
            <div class="card full-width">
                <div class="card-header">
                    <div class="card-icon">🧩</div>
                    <div>
                        <div class="card-title">错题知识点分析</div>
                        <div class="card-subtitle">薄弱知识点识别 & 知识点错误关联网络</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">函数</div>
                        <div class="metric-label">最薄弱知识点</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">68.7%</div>
                        <div class="metric-label">知识点错误率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">12</div>
                        <div class="metric-label">关联知识点</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">3.5</div>
                        <div class="metric-label">平均错误深度</div>
                    </div>
                </div>
                <div id="errorKnowledgeChart" class="chart"></div>
            </div>

            <!-- 13. 错题解题步骤分析 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🔬</div>
                    <div>
                        <div class="card-title">错题解题步骤分析</div>
                        <div class="card-subtitle">步骤效率 & 冗余步骤识别</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">72.8%</div>
                        <div class="metric-label">步骤正确率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">1.8步</div>
                        <div class="metric-label">平均冗余步骤</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">28.5%</div>
                        <div class="metric-label">错序步骤率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">85.2%</div>
                        <div class="metric-label">步骤相似度</div>
                    </div>
                </div>
                <div id="errorStepChart" class="chart"></div>
            </div>

            <!-- 14. 错题纠正效果分析 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📈</div>
                    <div>
                        <div class="card-title">错题纠正效果分析</div>
                        <div class="card-subtitle">纠正方式效果对比 & 反馈利用率</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">76.3%</div>
                        <div class="metric-label">纠正成功率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">82.1%</div>
                        <div class="metric-label">反馈利用率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">+18.5</div>
                        <div class="metric-label">纠正后增益</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">65.8%</div>
                        <div class="metric-label">行动跟进率</div>
                    </div>
                </div>
                <div id="errorCorrectionChart" class="chart"></div>
            </div>

            <!-- 15. 错题行为分析 -->
            <div class="card full-width">
                <div class="card-header">
                    <div class="card-icon">🎯</div>
                    <div>
                        <div class="card-title">错题行为分析</div>
                        <div class="card-subtitle">学习行为模式 & 自主学习能力评估</div>
                    </div>
                </div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value">78.5%</div>
                        <div class="metric-label">主动查看解析</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">52.3%</div>
                        <div class="metric-label">重试答题率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">34.7%</div>
                        <div class="metric-label">自我评估率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">18.9%</div>
                        <div class="metric-label">寻求帮助率</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">4.2分钟</div>
                        <div class="metric-label">平均停留时间</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">72.6%</div>
                        <div class="metric-label">自主学习指数</div>
                    </div>
                </div>
                <div id="errorBehaviorChart" class="chart"></div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // 1. 检索练习效果分析
        const retrievalChart = echarts.init(document.getElementById('retrievalChart'));
        const retrievalOption = {
            title: {
                text: '元认知准确率 vs 实际掌握率',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'cross' }
            },
            legend: {
                data: ['自评掌握率', '实际掌握率', '检索增益'],
                bottom: 0
            },
            xAxis: {
                type: 'category',
                data: ['函数', '导数', '积分', '概率', '统计', '几何', '代数'],
                axisLabel: { rotate: 45 }
            },
            yAxis: [
                {
                    type: 'value',
                    name: '掌握率(%)',
                    min: 0,
                    max: 100,
                    axisLabel: { formatter: '{value}%' }
                },
                {
                    type: 'value',
                    name: '增益分数',
                    min: 0,
                    max: 20,
                    axisLabel: { formatter: '{value}分' }
                }
            ],
            series: [
                {
                    name: '自评掌握率',
                    type: 'bar',
                    data: [85, 78, 92, 65, 70, 88, 82],
                    itemStyle: { color: '#3498db' }
                },
                {
                    name: '实际掌握率',
                    type: 'bar',
                    data: [72, 65, 78, 58, 62, 75, 69],
                    itemStyle: { color: '#e74c3c' }
                },
                {
                    name: '检索增益',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [12, 8, 15, 18, 14, 11, 16],
                    itemStyle: { color: '#f39c12' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        retrievalChart.setOption(retrievalOption);

        // 2. 间隔复习效果追踪
        const spacingChart = echarts.init(document.getElementById('spacingChart'));
        const spacingOption = {
            title: {
                text: '间隔复习效果 & 遗忘曲线',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'cross' }
            },
            legend: {
                data: ['记忆保持率', '复习效果', '最佳间隔区间'],
                bottom: 0
            },
            xAxis: {
                type: 'value',
                name: '间隔天数',
                min: 0,
                max: 14
            },
            yAxis: {
                type: 'value',
                name: '效果指数',
                min: 0,
                max: 100
            },
            series: [
                {
                    name: '记忆保持率',
                    type: 'line',
                    data: [
                        [0, 100], [1, 85], [2, 72], [3, 68], [4, 65],
                        [5, 62], [6, 58], [7, 55], [8, 52], [9, 48],
                        [10, 45], [11, 42], [12, 38], [13, 35], [14, 32]
                    ],
                    smooth: true,
                    itemStyle: { color: '#e74c3c' },
                    lineStyle: { width: 3 }
                },
                {
                    name: '复习效果',
                    type: 'line',
                    data: [
                        [0, 0], [1, 15], [2, 28], [3, 45], [4, 68],
                        [5, 75], [6, 78], [7, 72], [8, 65], [9, 58],
                        [10, 50], [11, 42], [12, 35], [13, 28], [14, 22]
                    ],
                    smooth: true,
                    itemStyle: { color: '#2ecc71' },
                    lineStyle: { width: 3 }
                },
                {
                    name: '最佳间隔区间',
                    type: 'line',
                    data: [[2, 0], [2, 100], [7, 100], [7, 0]],
                    lineStyle: { type: 'dashed', color: '#f39c12', width: 2 },
                    symbol: 'none',
                    areaStyle: {
                        color: 'rgba(243, 156, 18, 0.1)',
                        origin: 'start'
                    }
                }
            ]
        };
        spacingChart.setOption(spacingOption);

        // 3. 掌握学习进程监控
        const masteryChart = echarts.init(document.getElementById('masteryChart'));
        const masteryOption = {
            title: {
                text: '掌握学习转化漏斗',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c}人 ({d}%)'
            },
            series: [
                {
                    name: '掌握学习进程',
                    type: 'funnel',
                    left: '10%',
                    width: '80%',
                    label: {
                        show: true,
                        position: 'inside',
                        formatter: '{b}: {c}人\n({d}%)'
                    },
                    labelLine: {
                        show: false
                    },
                    itemStyle: {
                        borderColor: '#fff',
                        borderWidth: 1
                    },
                    emphasis: {
                        label: {
                            fontSize: 16
                        }
                    },
                    data: [
                        { value: 100, name: '首测参与', itemStyle: { color: '#3498db' } },
                        { value: 75, name: '首测达标', itemStyle: { color: '#2ecc71' } },
                        { value: 60, name: '纠正活动', itemStyle: { color: '#f39c12' } },
                        { value: 90, name: '再测达标', itemStyle: { color: '#27ae60' } },
                        { value: 45, name: '拓展学习', itemStyle: { color: '#9b59b6' } }
                    ]
                }
            ]
        };
        masteryChart.setOption(masteryOption);

        // 4. 教师增值效果评估
        const valueAddedChart = echarts.init(document.getElementById('valueAddedChart'));
        const valueAddedOption = {
            title: {
                text: '教师增值效果对比 (Value-Added Analysis)',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'shadow' }
            },
            legend: {
                data: ['增值得分', '置信区间下限', '置信区间上限'],
                bottom: 0
            },
            xAxis: {
                type: 'category',
                data: ['李老师', '王老师', '张老师', '刘老师', '陈老师', '赵老师'],
                axisLabel: { rotate: 45 }
            },
            yAxis: {
                type: 'value',
                name: '增值得分',
                axisLabel: { formatter: '{value}分' }
            },
            series: [
                {
                    name: '增值得分',
                    type: 'bar',
                    data: [15.2, 8.7, 22.1, 5.3, 18.9, 12.4],
                    itemStyle: {
                        color: new echarts.graphic.LinearGradient(
                            0, 0, 0, 1,
                            [
                                { offset: 0, color: '#667eea' },
                                { offset: 1, color: '#764ba2' }
                            ]
                        )
                    }
                },
                {
                    name: '置信区间',
                    type: 'line',
                    data: [
                        [0, 12.1, 18.3],
                        [1, 5.2, 12.2],
                        [2, 18.5, 25.7],
                        [3, 2.1, 8.5],
                        [4, 15.3, 22.5],
                        [5, 9.1, 15.7]
                    ],
                    lineStyle: { opacity: 0 },
                    stack: 'confidence',
                    areaStyle: {
                        color: 'rgba(102, 126, 234, 0.2)',
                        opacity: 0.5
                    },
                    symbol: 'none'
                }
            ]
        };
        valueAddedChart.setOption(valueAddedOption);

        // 5. 错因关联网络分析
        const networkData = {
            nodes: [
                { id: 'functions', name: '函数', type: 'knowledge', x: 300, y: 200 },
                { id: 'derivatives', name: '导数', type: 'knowledge', x: 500, y: 150 },
                { id: 'integrals', name: '积分', type: 'knowledge', x: 700, y: 200 },
                { id: 'probability', name: '概率', type: 'knowledge', x: 400, y: 350 },
                { id: 'concept_error', name: '概念错误', type: 'error', x: 200, y: 100 },
                { id: 'calculation_error', name: '计算错误', type: 'error', x: 600, y: 100 },
                { id: 'reading_error', name: '审题错误', type: 'error', x: 800, y: 300 },
                { id: 'careless_error', name: '粗心', type: 'error', x: 300, y: 450 }
            ],
            links: [
                { source: 'functions', target: 'concept_error', value: 85 },
                { source: 'derivatives', target: 'calculation_error', value: 72 },
                { source: 'integrals', target: 'reading_error', value: 68 },
                { source: 'probability', target: 'concept_error', value: 55 },
                { source: 'functions', target: 'careless_error', value: 42 },
                { source: 'derivatives', target: 'concept_error', value: 38 },
                { source: 'integrals', target: 'calculation_error', value: 65 },
                { source: 'probability', target: 'careless_error', value: 48 }
            ]
        };

        const svg = d3.select('#networkChart').append('svg')
            .attr('width', '100%')
            .attr('height', '100%');

        const simulation = d3.forceSimulation(networkData.nodes)
            .force('link', d3.forceLink(networkData.links).id(d => d.id).distance(150))
            .force('charge', d3.forceManyBody().strength(-300))
            .force('center', d3.forceCenter(600, 250));

        const link = svg.append('g')
            .selectAll('line')
            .data(networkData.links)
            .enter().append('line')
            .attr('class', 'link')
            .style('stroke-width', d => d.value / 10);

        const node = svg.append('g')
            .selectAll('circle')
            .data(networkData.nodes)
            .enter().append('circle')
            .attr('class', 'node')
            .attr('r', 20)
            .style('fill', d => {
                if (d.type === 'knowledge') return '#3498db';
                switch (d.name) {
                    case '概念错误': return '#e74c3c';
                    case '计算错误': return '#f39c12';
                    case '审题错误': return '#9b59b6';
                    case '粗心': return '#2ecc71';
                    default: return '#95a5a6';
                }
            })
            .style('stroke', '#fff')
            .style('stroke-width', 2)
            .call(d3.drag()
                .on('start', dragstarted)
                .on('drag', dragged)
                .on('end', dragended));

        const label = svg.append('g')
            .selectAll('text')
            .data(networkData.nodes)
            .enter().append('text')
            .text(d => d.name)
            .style('font-size', '12px')
            .style('text-anchor', 'middle')
            .style('alignment-baseline', 'middle')
            .style('fill', '#2c3e50')
            .style('font-weight', 'bold')
            .style('pointer-events', 'none');

        simulation.on('tick', () => {
            link
                .attr('x1', d => d.source.x)
                .attr('y1', d => d.source.y)
                .attr('x2', d => d.target.x)
                .attr('y2', d => d.target.y);

            node
                .attr('cx', d => d.x)
                .attr('cy', d => d.y);

            label
                .attr('x', d => d.x)
                .attr('y', d => d.y);
        });

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // 6. 解题步骤深度分析
        const stepsChart = echarts.init(document.getElementById('stepsChart'));
        const stepsOption = {
            title: {
                text: '解题步骤效率分析',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'item',
                formatter: function (params) {
                    return `${params.name}<br/>
                            时间: ${params.value[0]}秒<br/>
                            准确率: ${params.value[1]}%<br/>
                            复杂度: ${params.value[2]}`;
                }
            },
            legend: {
                data: ['低复杂度', '中复杂度', '高复杂度'],
                bottom: 0
            },
            xAxis: {
                type: 'value',
                name: '步骤时间(秒)',
                min: 0,
                max: 120
            },
            yAxis: {
                type: 'value',
                name: '步骤准确率(%)',
                min: 0,
                max: 100
            },
            series: [
                {
                    name: '低复杂度',
                    type: 'scatter',
                    data: [
                        [30, 95, 1], [25, 92, 1], [35, 88, 1], [20, 97, 1], [40, 85, 1],
                        [28, 94, 1], [32, 90, 1], [22, 96, 1], [38, 87, 1], [26, 93, 1]
                    ],
                    symbolSize: function (val) { return val[2] * 15; },
                    itemStyle: { color: '#2ecc71' }
                },
                {
                    name: '中复杂度',
                    type: 'scatter',
                    data: [
                        [55, 82, 2], [48, 78, 2], [62, 75, 2], [45, 85, 2], [68, 72, 2],
                        [52, 80, 2], [58, 77, 2], [50, 83, 2], [65, 74, 2], [47, 81, 2]
                    ],
                    symbolSize: function (val) { return val[2] * 15; },
                    itemStyle: { color: '#f39c12' }
                },
                {
                    name: '高复杂度',
                    type: 'scatter',
                    data: [
                        [85, 65, 3], [78, 68, 3], [92, 62, 3], [75, 70, 3], [98, 58, 3],
                        [82, 67, 3], [88, 64, 3], [80, 69, 3], [95, 60, 3], [77, 71, 3]
                    ],
                    symbolSize: function (val) { return val[2] * 15; },
                    itemStyle: { color: '#e74c3c' }
                }
            ]
        };
        stepsChart.setOption(stepsOption);

        // 7. 年级维度成绩分析
        const gradeChart = echarts.init(document.getElementById('gradeChart'));
        const gradeOption = {
            title: {
                text: '年级各学科成绩分布 & 趋势分析',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'cross' }
            },
            legend: {
                data: ['平均分', '最高分', '最低分', '标准差'],
                bottom: 0
            },
            xAxis: {
                type: 'category',
                data: ['数学', '语文', '英语', '物理', '化学', '生物', '历史', '地理']
            },
            yAxis: [
                {
                    type: 'value',
                    name: '分数',
                    min: 0,
                    max: 100,
                    axisLabel: { formatter: '{value}分' }
                },
                {
                    type: 'value',
                    name: '标准差',
                    min: 0,
                    max: 20,
                    axisLabel: { formatter: '{value}' }
                }
            ],
            series: [
                {
                    name: '平均分',
                    type: 'bar',
                    data: [82.5, 75.3, 68.9, 71.2, 73.8, 79.1, 77.6, 74.3],
                    itemStyle: { color: '#3498db' }
                },
                {
                    name: '最高分',
                    type: 'line',
                    data: [98, 95, 89, 92, 94, 96, 93, 91],
                    itemStyle: { color: '#2ecc71' },
                    lineStyle: { width: 2 }
                },
                {
                    name: '最低分',
                    type: 'line',
                    data: [45, 52, 38, 42, 48, 51, 49, 46],
                    itemStyle: { color: '#e74c3c' },
                    lineStyle: { width: 2 }
                },
                {
                    name: '标准差',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [12.8, 11.5, 15.2, 13.6, 12.1, 10.9, 11.8, 13.2],
                    itemStyle: { color: '#f39c12' },
                    lineStyle: { width: 2, type: 'dashed' }
                }
            ]
        };
        gradeChart.setOption(gradeOption);

        // 8. 班级维度成绩分析
        const classChart = echarts.init(document.getElementById('classChart'));
        const classOption = {
            title: {
                text: '班级排名对比 & 成绩分布',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'shadow' }
            },
            legend: {
                data: ['班级平均分', '优秀率', '及格率'],
                bottom: 0
            },
            xAxis: {
                type: 'category',
                data: ['1班', '2班', '3班', '4班', '5班', '6班', '7班', '8班', '9班', '10班', '11班', '12班'],
                axisLabel: { rotate: 45 }
            },
            yAxis: [
                {
                    type: 'value',
                    name: '平均分',
                    min: 60,
                    max: 90,
                    axisLabel: { formatter: '{value}分' }
                },
                {
                    type: 'value',
                    name: '百分比',
                    min: 0,
                    max: 100,
                    axisLabel: { formatter: '{value}%' }
                }
            ],
            series: [
                {
                    name: '班级平均分',
                    type: 'bar',
                    data: [84.2, 82.8, 81.2, 79.5, 78.9, 77.3, 76.8, 75.1, 74.6, 73.2, 71.8, 70.5],
                    itemStyle: {
                        color: function (params) {
                            const colors = ['#FFD700', '#C0C0C0', '#CD7F32', '#87CEEB', '#98FB98', '#DDA0DD', '#F0E68C', '#FA8072', '#20B2AA', '#87CEFA', '#DEB887', '#D3D3D3'];
                            return colors[params.dataIndex];
                        }
                    }
                },
                {
                    name: '优秀率',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [45.5, 42.2, 38.9, 36.7, 34.4, 31.1, 28.9, 26.7, 24.4, 22.2, 20.0, 18.9],
                    itemStyle: { color: '#2ecc71' },
                    lineStyle: { width: 3 }
                },
                {
                    name: '及格率',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [97.8, 95.6, 94.4, 93.3, 91.1, 88.9, 86.7, 84.4, 82.2, 80.0, 77.8, 75.6],
                    itemStyle: { color: '#3498db' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        classChart.setOption(classOption);

        // 9. 个人维度成绩分析
        const personalChart = echarts.init(document.getElementById('personalChart'));
        const personalOption = {
            title: [
                {
                    text: '个人能力雷达图',
                    left: '25%',
                    top: '5%',
                    textAlign: 'center',
                    textStyle: { fontSize: 14 }
                },
                {
                    text: '个人成绩趋势',
                    left: '75%',
                    top: '5%',
                    textAlign: 'center',
                    textStyle: { fontSize: 14 }
                }
            ],
            tooltip: {
                trigger: 'item'
            },
            legend: {
                data: ['当前能力', '年级平均', '个人成绩', '班级平均'],
                bottom: 0
            },
            radar: {
                center: ['25%', '55%'],
                radius: '50%',
                indicator: [
                    { name: '数学', max: 100 },
                    { name: '语文', max: 100 },
                    { name: '英语', max: 100 },
                    { name: '物理', max: 100 },
                    { name: '化学', max: 100 },
                    { name: '生物', max: 100 },
                    { name: '历史', max: 100 },
                    { name: '地理', max: 100 }
                ],
                splitArea: {
                    areaStyle: {
                        color: ['rgba(52, 152, 219, 0.1)', 'rgba(52, 152, 219, 0.05)']
                    }
                },
                axisLine: {
                    lineStyle: { color: 'rgba(52, 152, 219, 0.5)' }
                },
                splitLine: {
                    lineStyle: { color: 'rgba(52, 152, 219, 0.3)' }
                }
            },
            grid: {
                left: '55%',
                top: '15%',
                right: '5%',
                bottom: '15%'
            },
            xAxis: {
                type: 'category',
                data: ['第1次', '第2次', '第3次', '第4次', '第5次', '第6次'],
                gridIndex: 0
            },
            yAxis: {
                type: 'value',
                name: '总分',
                min: 60,
                max: 100,
                gridIndex: 0,
                axisLabel: { formatter: '{value}分' }
            },
            series: [
                {
                    name: '当前能力',
                    type: 'radar',
                    data: [
                        {
                            value: [92, 78, 65, 88, 82, 85, 75, 79],
                            name: '个人得分',
                            itemStyle: { color: '#e74c3c' },
                            areaStyle: { color: 'rgba(231, 76, 60, 0.3)' }
                        }
                    ]
                },
                {
                    name: '年级平均',
                    type: 'radar',
                    data: [
                        {
                            value: [82.5, 75.3, 68.9, 71.2, 73.8, 79.1, 77.6, 74.3],
                            name: '年级平均',
                            itemStyle: { color: '#3498db' },
                            areaStyle: { color: 'rgba(52, 152, 219, 0.2)' }
                        }
                    ]
                },
                {
                    name: '个人成绩',
                    type: 'line',
                    xAxisIndex: 0,
                    yAxisIndex: 0,
                    data: [72.5, 76.8, 79.2, 82.1, 84.6, 85.6],
                    itemStyle: { color: '#e74c3c' },
                    lineStyle: { width: 3 },
                    markPoint: {
                        data: [
                            { type: 'max', name: '最高分' },
                            { type: 'min', name: '最低分' }
                        ]
                    }
                },
                {
                    name: '班级平均',
                    type: 'line',
                    xAxisIndex: 0,
                    yAxisIndex: 0,
                    data: [78.2, 78.8, 79.5, 80.1, 80.8, 81.2],
                    itemStyle: { color: '#2ecc71' },
                    lineStyle: { width: 2, type: 'dashed' }
                }
            ]
        };
        personalChart.setOption(personalOption);

        // 10. 错题概览统计
        const errorOverviewChart = echarts.init(document.getElementById('errorOverviewChart'));
        const errorOverviewOption = {
            title: {
                text: '错题时间分布 & 改正进度',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'cross' }
            },
            legend: {
                data: ['新增错题', '已改正', '待改正', '改正率'],
                bottom: 0
            },
            xAxis: {
                type: 'category',
                data: ['第1周', '第2周', '第3周', '第4周', '第5周', '第6周', '第7周', '第8周']
            },
            yAxis: [
                {
                    type: 'value',
                    name: '题目数量',
                    min: 0,
                    axisLabel: { formatter: '{value}题' }
                },
                {
                    type: 'value',
                    name: '改正率',
                    min: 0,
                    max: 100,
                    axisLabel: { formatter: '{value}%' }
                }
            ],
            series: [
                {
                    name: '新增错题',
                    type: 'bar',
                    data: [25, 18, 32, 28, 22, 19, 24, 20],
                    itemStyle: { color: '#e74c3c' }
                },
                {
                    name: '已改正',
                    type: 'bar',
                    data: [18, 14, 22, 19, 16, 13, 17, 15],
                    itemStyle: { color: '#2ecc71' }
                },
                {
                    name: '待改正',
                    type: 'bar',
                    data: [7, 4, 10, 9, 6, 6, 7, 5],
                    itemStyle: { color: '#f39c12' }
                },
                {
                    name: '改正率',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [72, 78, 69, 68, 73, 68, 71, 75],
                    itemStyle: { color: '#9b59b6' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        errorOverviewChart.setOption(errorOverviewOption);

        // 11. 错因归因分析
        const errorCauseChart = echarts.init(document.getElementById('errorCauseChart'));
        const errorCauseOption = {
            title: {
                text: '错因分类 & AI归因准确率',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['概念理解错误', '公式应用错误', '计算粗心', '审题不仔细', '步骤遗漏', '逻辑错误', '知识点混淆', '时间管理不当']
            },
            series: [
                {
                    name: '错因分布',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    center: ['65%', '50%'],
                    data: [
                        { value: 28, name: '概念理解错误', itemStyle: { color: '#e74c3c' } },
                        { value: 22, name: '公式应用错误', itemStyle: { color: '#f39c12' } },
                        { value: 18, name: '计算粗心', itemStyle: { color: '#3498db' } },
                        { value: 15, name: '审题不仔细', itemStyle: { color: '#2ecc71' } },
                        { value: 12, name: '步骤遗漏', itemStyle: { color: '#9b59b6' } },
                        { value: 10, name: '逻辑错误', itemStyle: { color: '#1abc9c' } },
                        { value: 8, name: '知识点混淆', itemStyle: { color: '#e67e22' } },
                        { value: 5, name: '时间管理不当', itemStyle: { color: '#95a5a6' } }
                    ],
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        errorCauseChart.setOption(errorCauseOption);

        // 12. 错题知识点分析
        const errorKnowledgeChart = echarts.init(document.getElementById('errorKnowledgeChart'));
        const errorKnowledgeOption = {
            title: {
                text: '知识点错误热力图',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                position: 'top',
                formatter: function (params) {
                    return `${params.data[1]} - ${params.data[0]}<br/>错误次数: ${params.data[2]}`;
                }
            },
            grid: {
                height: '50%',
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: ['函数', '导数', '积分', '概率', '统计', '几何', '代数', '三角'],
                splitArea: {
                    show: true
                }
            },
            yAxis: {
                type: 'category',
                data: ['概念错误', '计算错误', '应用错误', '证明错误', '推理错误'],
                splitArea: {
                    show: true
                }
            },
            visualMap: {
                min: 0,
                max: 20,
                calculable: true,
                orient: 'horizontal',
                left: 'center',
                bottom: '15%',
                inRange: {
                    color: ['#e8f5e8', '#c8e6c9', '#81c784', '#4caf50', '#2e7d32']
                }
            },
            series: [
                {
                    name: '错误热力图',
                    type: 'heatmap',
                    data: [
                        [0, 0, 15], [0, 1, 12], [0, 2, 8], [0, 3, 5], [0, 4, 3],
                        [1, 0, 12], [1, 1, 18], [1, 2, 6], [1, 3, 4], [1, 4, 2],
                        [2, 0, 8], [2, 1, 14], [2, 2, 10], [2, 3, 7], [2, 4, 5],
                        [3, 0, 6], [3, 1, 9], [3, 2, 12], [3, 3, 8], [3, 4, 6],
                        [4, 0, 4], [4, 1, 7], [4, 2, 9], [4, 3, 11], [4, 4, 8],
                        [5, 0, 7], [5, 1, 5], [5, 2, 4], [5, 3, 9], [5, 4, 12],
                        [6, 0, 9], [6, 1, 8], [6, 2, 7], [6, 3, 6], [6, 4, 4],
                        [7, 0, 5], [7, 1, 6], [7, 2, 8], [7, 3, 10], [7, 4, 7]
                    ],
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        errorKnowledgeChart.setOption(errorKnowledgeOption);

        // 13. 错题解题步骤分析
        const errorStepChart = echarts.init(document.getElementById('errorStepChart'));
        const errorStepOption = {
            title: {
                text: '解题步骤效率 & 错误步骤分析',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'cross' }
            },
            legend: {
                data: ['正确步骤得分', '冗余步骤扣分', '错序步骤扣分', '步骤相似度'],
                bottom: 0
            },
            xAxis: {
                type: 'category',
                data: ['选择题', '填空题', '解答题1', '解答题2', '解答题3', '证明题', '应用题', '综合题']
            },
            yAxis: [
                {
                    type: 'value',
                    name: '得分',
                    min: 0,
                    max: 100,
                    axisLabel: { formatter: '{value}分' }
                },
                {
                    type: 'value',
                    name: '相似度',
                    min: 0,
                    max: 100,
                    axisLabel: { formatter: '{value}%' }
                }
            ],
            series: [
                {
                    name: '正确步骤得分',
                    type: 'bar',
                    data: [85, 78, 72, 68, 65, 70, 75, 58],
                    itemStyle: { color: '#2ecc71' }
                },
                {
                    name: '冗余步骤扣分',
                    type: 'bar',
                    data: [5, 8, 12, 15, 18, 12, 10, 22],
                    itemStyle: { color: '#f39c12' }
                },
                {
                    name: '错序步骤扣分',
                    type: 'bar',
                    data: [3, 5, 8, 10, 12, 8, 6, 15],
                    itemStyle: { color: '#e74c3c' }
                },
                {
                    name: '步骤相似度',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [92, 88, 85, 82, 78, 83, 87, 75],
                    itemStyle: { color: '#9b59b6' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        errorStepChart.setOption(errorStepOption);

        // 14. 错题纠正效果分析
        const errorCorrectionChart = echarts.init(document.getElementById('errorCorrectionChart'));
        const errorCorrectionOption = {
            title: {
                text: '不同纠正方式效果对比',
                left: 'center',
                textStyle: { fontSize: 14 }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { type: 'shadow' }
            },
            legend: {
                data: ['纠正成功率', '反馈利用率', '行动跟进率', '纠正后增益'],
                bottom: 0
            },
            xAxis: {
                type: 'category',
                data: ['视频讲解', '文本解析', 'AI辅导', '同伴互助', '教师指导'],
                axisLabel: { rotate: 45 }
            },
            yAxis: [
                {
                    type: 'value',
                    name: '百分比',
                    min: 0,
                    max: 100,
                    axisLabel: { formatter: '{value}%' }
                },
                {
                    type: 'value',
                    name: '增益分数',
                    min: 0,
                    max: 30,
                    axisLabel: { formatter: '{value}分' }
                }
            ],
            series: [
                {
                    name: '纠正成功率',
                    type: 'bar',
                    data: [85, 78, 88, 65, 92],
                    itemStyle: { color: '#2ecc71' }
                },
                {
                    name: '反馈利用率',
                    type: 'bar',
                    data: [75, 82, 90, 68, 95],
                    itemStyle: { color: '#3498db' }
                },
                {
                    name: '行动跟进率',
                    type: 'bar',
                    data: [68, 72, 85, 58, 88],
                    itemStyle: { color: '#f39c12' }
                },
                {
                    name: '纠正后增益',
                    type: 'line',
                    yAxisIndex: 1,
                    data: [15, 12, 22, 8, 25],
                    itemStyle: { color: '#e74c3c' },
                    lineStyle: { width: 3 }
                }
            ]
        };
        errorCorrectionChart.setOption(errorCorrectionOption);

        // 15. 错题行为分析
        const errorBehaviorChart = echarts.init(document.getElementById('errorBehaviorChart'));
        const errorBehaviorOption = {
            title: [
                {
                    text: '学习行为时间分布',
                    left: '25%',
                    top: '5%',
                    textAlign: 'center',
                    textStyle: { fontSize: 14 }
                },
                {
                    text: '行为效果评估',
                    left: '75%',
                    top: '5%',
                    textAlign: 'center',
                    textStyle: { fontSize: 14 }
                }
            ],
            tooltip: {
                trigger: 'item'
            },
            legend: {
                data: ['查看解析', '重试答题', '自我评估', '寻求帮助', '行为效果'],
                bottom: 0
            },
            series: [
                {
                    name: '行为时间分布',
                    type: 'pie',
                    radius: ['30%', '50%'],
                    center: ['25%', '55%'],
                    data: [
                        { value: 35, name: '查看解析', itemStyle: { color: '#3498db' } },
                        { value: 28, name: '重试答题', itemStyle: { color: '#2ecc71' } },
                        { value: 20, name: '自我评估', itemStyle: { color: '#f39c12' } },
                        { value: 17, name: '寻求帮助', itemStyle: { color: '#e74c3c' } }
                    ],
                    label: {
                        show: true,
                        formatter: '{b}: {c}%'
                    }
                },
                {
                    name: '行为效果评估',
                    type: 'radar',
                    center: ['75%', '55%'],
                    radius: '45%',
                    data: [
                        {
                            value: [85, 72, 68, 58, 75, 82],
                            name: '行为效果',
                            itemStyle: { color: '#9b59b6' },
                            areaStyle: { color: 'rgba(155, 89, 182, 0.3)' }
                        }
                    ]
                }
            ],
            radar: {
                center: ['75%', '55%'],
                radius: '45%',
                indicator: [
                    { name: '主动性', max: 100 },
                    { name: '持续性', max: 100 },
                    { name: '深度思考', max: 100 },
                    { name: '求助意识', max: 100 },
                    { name: '反思能力', max: 100 },
                    { name: '改进效果', max: 100 }
                ],
                splitArea: {
                    areaStyle: {
                        color: ['rgba(155, 89, 182, 0.1)', 'rgba(155, 89, 182, 0.05)']
                    }
                }
            }
        };
        errorBehaviorChart.setOption(errorBehaviorOption);

        // 响应式处理
        window.addEventListener('resize', () => {
            retrievalChart.resize();
            spacingChart.resize();
            masteryChart.resize();
            valueAddedChart.resize();
            stepsChart.resize();
            gradeChart.resize();
            classChart.resize();
            personalChart.resize();
            errorOverviewChart.resize();
            errorCauseChart.resize();
            errorKnowledgeChart.resize();
            errorStepChart.resize();
            errorCorrectionChart.resize();
            errorBehaviorChart.resize();
        });

        // 图表交互
        retrievalChart.on('click', function (params) {
            alert(`点击了${params.name}：${params.seriesName} = ${params.value}${params.seriesName.includes('率') ? '%' : '分'}`);
        });

        spacingChart.on('click', function (params) {
            if (params.seriesName === '最佳间隔区间') return;
            alert(`第${params.value[0]}天：${params.seriesName} = ${params.value[1]}${params.seriesName.includes('率') ? '%' : '分'}`);
        });

        masteryChart.on('click', function (params) {
            alert(`${params.name}：${params.value}人 (${params.percent}%)`);
        });

        valueAddedChart.on('click', function (params) {
            alert(`${params.name}的增值得分：${params.value}分`);
        });

        stepsChart.on('click', function (params) {
            alert(`${params.seriesName}步骤：用时${params.value[0]}秒，准确率${params.value[1]}%`);
        });

        // 成绩分析模块交互
        gradeChart.on('click', function (params) {
            if (params.seriesName === '标准差') {
                alert(`${params.name}学科的${params.seriesName}：${params.value}`);
            } else {
                alert(`${params.name}学科的${params.seriesName}：${params.value}分`);
            }
        });

        classChart.on('click', function (params) {
            if (params.seriesName === '班级平均分') {
                alert(`${params.name}的${params.seriesName}：${params.value}分`);
            } else {
                alert(`${params.name}的${params.seriesName}：${params.value}%`);
            }
        });

        personalChart.on('click', function (params) {
            if (params.componentType === 'radar') {
                alert(`${params.seriesName}：各科表现详情`);
            } else if (params.componentType === 'series') {
                alert(`${params.seriesName} - ${params.name}：${params.value}分`);
            }
        });

        // 错题分析模块交互
        errorOverviewChart.on('click', function (params) {
            if (params.seriesName === '改正率') {
                alert(`${params.name}的${params.seriesName}：${params.value}%`);
            } else {
                alert(`${params.name}的${params.seriesName}：${params.value}题`);
            }
        });

        errorCauseChart.on('click', function (params) {
            alert(`${params.name}：${params.value}个错题 (${params.percent}%)`);
        });

        errorKnowledgeChart.on('click', function (params) {
            const knowledge = ['函数', '导数', '积分', '概率', '统计', '几何', '代数', '三角'];
            const errorType = ['概念错误', '计算错误', '应用错误', '证明错误', '推理错误'];
            alert(`${knowledge[params.data[0]]} - ${errorType[params.data[1]]}：${params.data[2]}次错误`);
        });

        errorStepChart.on('click', function (params) {
            if (params.seriesName === '步骤相似度') {
                alert(`${params.name}的${params.seriesName}：${params.value}%`);
            } else {
                alert(`${params.name}的${params.seriesName}：${params.value}分`);
            }
        });

        errorCorrectionChart.on('click', function (params) {
            if (params.seriesName === '纠正后增益') {
                alert(`${params.name}的${params.seriesName}：${params.value}分`);
            } else {
                alert(`${params.name}的${params.seriesName}：${params.value}%`);
            }
        });

        errorBehaviorChart.on('click', function (params) {
            if (params.seriesName === '行为时间分布') {
                alert(`${params.name}：占用${params.value}%的时间`);
            } else if (params.seriesName === '行为效果评估') {
                alert(`行为效果评估：各维度表现详情`);
            }
        });
    </script>
</body>

</html>